<!DOCTYPE html>
<html lang="tr">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <title>Tüm Duyurular - Shomme</title>
  <meta name="description" content="">
  <meta name="keywords" content="">

  <link href="assets/img/favicon.png" rel="icon">
  <link href="assets/img/apple-touch-icon.png" rel="apple-touch-icon">

  <link href="https://fonts.googleapis.com" rel="preconnect">
  <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&family=Montserrat:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">

  <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
  <link href="assets/vendor/aos/aos.css" rel="stylesheet">
  <link href="assets/vendor/glightbox/css/glightbox.min.css" rel="stylesheet">
  <link href="assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet">

  <link href="assets/css/main.css" rel="stylesheet">
</head>

<body class="blog-page">

  <header id="header" class="header d-flex align-items-center fixed-top">
    <div class="container-fluid container-xl position-relative d-flex align-items-center justify-content-between">

      <a href="index.html" class="logo d-flex align-items-center">
        <h1 class="sitename">Shomme</h1>
      </a>

      <nav id="navmenu" class="navmenu">
        <ul>
          <li><a href="index.html">Ana Sayfa</a></li>

          <li class="dropdown"><a href="hakkimizda.html"><span>Kurumsal</span> <i class="bi bi-chevron-down toggle-dropdown"></i></a>
            <ul>
              <li><a href="hakkimizda.html">Hakkımızda</a></li>
              <li><a href="hakkimizda.html#misyon">Misyon & Vizyon</a></li>
            </ul>
          </li>

          <li><a href="urunler.html">Ürünlerimiz</a></li>

          <li class="dropdown"><a href="#"><span>Birimlerimiz</span> <i class="bi bi-chevron-down toggle-dropdown"></i></a>
            <ul>
              <li><a href="birim-teknik.html">Teknik Servis</a></li>
              <li><a href="birim-arge.html">Ar-Ge Ekibi</a></li>
              <li><a href="birim-musteri.html">Müşteri Hizmetleri</a></li>
            </ul>
          </li>

          <li><a href="iletisim.html">İletişim</a></li>

          <li class="ms-4" id="user-login-li">
            <a href="#" data-bs-toggle="modal" data-bs-target="#loginModal" class="d-flex align-items-center" title="Giriş Yap">
              <i class="bi bi-person-circle" style="font-size: 1.4rem;"></i>
            </a>
          </li>

          <li class="ms-3 position-relative">
            <a href="#" data-bs-toggle="modal" data-bs-target="#cartModal" class="d-flex align-items-center" title="Sepetim" onclick="updateCartUI()">
              <i class="bi bi-cart3" style="font-size: 1.4rem;"></i>
              <span id="cart-count" class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger" style="font-size: 0.6rem; display: none;">0</span>
            </a>
          </li>

        </ul>
        <i class="mobile-nav-toggle d-xl-none bi bi-list"></i>
      </nav>

    </div>
  </header>

  <main class="main">

    <div class="page-title dark-background" data-aos="fade" style="background-image: url(assets/img/blog-page-title-bg.jpg);">
      <div class="container">
        <h1>Duyurular ve Haberler</h1>
        <nav class="breadcrumbs">
          <ol>
            <li><a href="index.html">Ana Sayfa</a></li>
            <li class="current">Duyurular</li>
          </ol>
        </nav>
      </div>
    </div>

    <section id="blog-posts" class="blog-posts section">
      <div class="container">
        <div class="row gy-4" id="all-announcements-container"></div>
      </div>
    </section>

  </main>

  <footer id="footer" class="footer light-background">
    <div class="footer-top">
      <div class="container">
        <div class="row gy-4">
          <div class="col-lg-5 col-md-12 footer-about">
            <a href="index.html" class="logo d-flex align-items-center"><span class="sitename">Shomme</span></a>
            <p>2020 yılından beri akıllı ev teknolojileri, güvenlik sistemleri ve enerji yönetimi alanında yerli ve yenilikçi çözümler sunuyoruz.</p>
            <div class="social-links d-flex mt-4">
              <a href=""><i class="bi bi-twitter-x"></i></a>
              <a href=""><i class="bi bi-facebook"></i></a>
              <a href=""><i class="bi bi-instagram"></i></a>
              <a href=""><i class="bi bi-linkedin"></i></a>
            </div>
          </div>
          <div class="col-lg-2 col-6 footer-links">
            <h4>Hızlı Erişim</h4>
            <ul>
              <li><a href="index.html">Ana Sayfa</a></li>
              <li><a href="hakkimizda.html">Hakkımızda</a></li>
              <li><a href="urunler.html">Ürünlerimiz</a></li>
              <li><a href="iletisim.html">İletişim</a></li>
            </ul>
          </div>
          <div class="col-lg-2 col-6 footer-links">
            <h4>Hizmetlerimiz</h4>
            <ul>
              <li><a href="#">Akıllı Güvenlik</a></li>
              <li><a href="#">Enerji Yönetimi</a></li>
              <li><a href="#">Aydınlatma</a></li>
              <li><a href="#">Teknik Destek</a></li>
            </ul>
          </div>
          <div class="col-lg-3 col-md-12 footer-contact text-center text-md-start">
            <h4>İletişim</h4>
            <p>Umuttepe Yerleşkesi</p><p>Teknoloji Fakültesi</p><p>Kocaeli, Türkiye</p>
            <p class="mt-4"><strong>Telefon:</strong> <span>+90 262 123 45 67</span></p>
            <p><strong>Email:</strong> <span>info@shomme.com.tr</span></p>
          </div>
        </div>
      </div>
    </div>
    <div class="container copyright text-center">
      <p>© <span>Telif Hakkı</span> <strong class="px-1 sitename">Shomme</strong> <span>Tüm Hakları Saklıdır</span></p>
      <div class="credits">Designed by <a href="https://bootstrapmade.com/">BootstrapMade</a></div>
    </div>
  </footer>

  <a href="#" id="scroll-top" class="scroll-top d-flex align-items-center justify-content-center"><i class="bi bi-arrow-up-short"></i></a>
  <div id="preloader"></div>

  <div class="modal fade" id="dynamicAnnouncementModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-lg">
      <div class="modal-content">
        <div class="modal-header border-0 pb-0">
          <h5 class="modal-title fw-bold" id="modalAnnTitle">Duyuru Başlığı</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Kapat"></button>
        </div>
        <div class="modal-body pt-3">
          <img id="modalAnnImg" src="" class="img-fluid w-100 rounded mb-4" style="max-height: 400px; object-fit: cover;" alt="Duyuru">
          <div class="px-2">
            <div class="d-flex align-items-center text-muted small mb-3">
                <i class="bi bi-calendar me-2"></i> <span id="modalAnnDate">Tarih</span>
                <span class="mx-2">|</span>
                <i class="bi bi-person me-2"></i> <span id="modalAnnAuthor">Yazar</span>
            </div>
            <p id="modalAnnText" style="font-size: 1.1rem; line-height: 1.6;">İçerik buraya gelecek...</p>
            <hr class="my-4">
            <div id="modalFileArea"></div>
          </div>
        </div>
        <div class="modal-footer border-0">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Kapat</button>
        </div>
      </div>
    </div>
  </div>

  <div class="modal fade" id="loginModal" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header border-0">
          <h5 class="modal-title fw-bold">Giriş Yap</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <form id="loginForm">
            <div class="mb-3">
              <label class="form-label">Kullanıcı Adı</label>
              <input type="text" class="form-control" id="username" placeholder="Örn: admin" required>
            </div>
            <div class="mb-3">
              <label class="form-label">Şifre</label>
              <input type="password" class="form-control" id="password" placeholder="Örn: 1234" required>
            </div>
            <div class="d-grid">
              <button type="submit" class="btn btn-primary">Giriş Yap</button>
            </div>
          </form>
          <div class="text-center mt-3">
            <small class="text-muted">Hesabın yok mu? <a href="#" data-bs-toggle="modal" data-bs-target="#registerModal">Kayıt Ol</a></small>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="modal fade" id="registerModal" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header border-0">
          <h5 class="modal-title fw-bold">Aramıza Katıl</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <form id="registerForm">
            <div class="mb-3">
              <label class="form-label">Kullanıcı Adı Belirle</label>
              <input type="text" class="form-control" id="regUsername" placeholder="Örn: ahmet123" required>
            </div>
            <div class="mb-3">
              <label class="form-label">Şifre Belirle</label>
              <input type="password" class="form-control" id="regPassword" placeholder="En az 4 karakter" required minlength="4">
            </div>
            <div class="d-grid">
              <button type="submit" class="btn btn-success">Kayıt Ol</button>
            </div>
          </form>
          <div class="text-center mt-3">
            <small class="text-muted">Zaten hesabın var mı? <a href="#" data-bs-toggle="modal" data-bs-target="#loginModal">Giriş Yap</a></small>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="modal fade" id="cartModal" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
      <div class="modal-content">
        <div class="modal-header bg-light">
          <h5 class="modal-title fw-bold"><i class="bi bi-cart3"></i> Sepetim</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <div id="empty-cart-msg" class="text-center py-5">
            <i class="bi bi-basket2 display-1 text-muted" style="opacity: 0.5;"></i>
            <p class="mt-3 text-muted fs-5">Sepetiniz şu an boş.</p>
            <button class="btn btn-primary btn-sm mt-2" data-bs-dismiss="modal">Alışverişe Dön</button>
          </div>
          <div id="cart-content" style="display: none;">
            <ul class="list-group list-group-flush mb-3" id="cart-list"></ul>
          </div>
        </div>
        <div class="modal-footer justify-content-between bg-light" id="cart-footer" style="display: none;">
          <div>
            <span class="text-muted small">Toplam Tutar:</span><br>
            <span id="cart-total" class="h4 fw-bold text-primary">₺0.00</span>
          </div>
          <button class="btn btn-success px-4">Ödemeyi Tamamla <i class="bi bi-arrow-right"></i></button>
        </div>
      </div>
    </div>
  </div>

  <div class="modal fade" id="profileModal" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header border-0">
          <h5 class="modal-title fw-bold"><i class="bi bi-person-vcard"></i> Kullanıcı Bilgilerim</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <form onsubmit="saveProfile(event)">
            <div class="row mb-3">
              <div class="col-6">
                <label class="form-label small text-muted">İsim</label>
                <input type="text" class="form-control" id="profName" placeholder="Adınız">
              </div>
              <div class="col-6">
                <label class="form-label small text-muted">Soyisim</label>
                <input type="text" class="form-control" id="profSurname" placeholder="Soyadınız">
              </div>
            </div>
            <div class="mb-3">
              <label class="form-label small text-muted">Telefon Numarası</label>
              <input type="tel" class="form-control" id="profPhone" placeholder="05XX XXX XX XX">
            </div>
            <div class="mb-3">
              <label class="form-label small text-muted">T.C. Kimlik No</label>
              <input type="text" class="form-control" id="profTC" placeholder="11 Haneli TCKN" maxlength="11">
            </div>
            <div class="mb-3">
              <label class="form-label small text-muted">Açık Adres</label>
              <textarea class="form-control" id="profAddress" rows="3" placeholder="Mahalle, Cadde, No..."></textarea>
            </div>
            <div class="d-grid">
              <button type="submit" class="btn btn-primary">Bilgileri Güncelle</button>
            </div>
            <div id="profSuccessMsg" class="alert alert-success mt-2 p-2 text-center small" style="display:none;">
              <i class="bi bi-check-circle-fill"></i> Bilgileriniz başarıyla kaydedildi!
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>

  <script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
  <script src="assets/vendor/php-email-form/validate.js"></script>
  <script src="assets/vendor/aos/aos.js"></script>
  <script src="assets/vendor/glightbox/js/glightbox.min.js"></script>
  <script src="assets/vendor/swiper/swiper-bundle.min.js"></script>
  <script src="assets/vendor/imagesloaded/imagesloaded.pkgd.min.js"></script>
  <script src="assets/vendor/isotope-layout/isotope.pkgd.min.js"></script>

  <script src="assets/js/main.js"></script>

  <script>
    // 1. GLOBAL DEĞİŞKENLER
    let cart = JSON.parse(localStorage.getItem('shommeCart')) || [];

    // 2. SAYFA YÜKLENDİĞİNDE
    document.addEventListener("DOMContentLoaded", function() {
      // A. Login Kontrolü
      if (localStorage.getItem('isLoggedIn') === 'true') {
        updateUIForLoggedInUser(localStorage.getItem('userName'));
      }
      // B. Sepet Kontrolü
      updateCartUI();
      // C. Duyuruları Yükle
      loadAllAnnouncementsPage(); 
    });

    // 3. DUYURU SİSTEMİ (MEVCUT KODUN)
    function loadAllAnnouncementsPage() {
      const container = document.getElementById('all-announcements-container');
      if (!container) return;

      const defaultAnnouncements = [
          { id: 1, title: "Yaz Kampanyası Başladı!", date: "15 Haziran 2024", author: "Satış Ekibi", img: "assets/img/blog/blog-1.jpg", text: "Yaz mevsimine özel güvenlik paketi fırsatları! %20 indirim fırsatı devam ediyor.", fileType: 'pdf' },
          { id: 2, title: "Shomme App v2.0 Yayında", date: "10 Nisan 2025", author: "Yazılım Ekibi", img: "assets/img/blog/blog-2.jpg", text: "Yenilenen modern arayüz ve widget özellikleri yayında.", fileType: 'word' },
          { id: 3, title: "Yeni Robot Süpürge Stoklarda!", date: "5 Mayıs 2025", author: "Ürün Yönetimi", img: "assets/img/blog/blog-3.jpg", text: "Yapay zeka destekli Lidar sensörleri ile yeni CleanBot serisi stoklarımızda.", fileType: 'image' },
          { id: 4, title: "Yılın En İyi Markası Ödülü", date: "20 Ağustos 2025", author: "Yönetim", img: "assets/img/blog/blog-4.jpg", text: "Yılın En Yenilikçi Güvenlik Çözümü ödülüne layık görüldük.", fileType: 'pdf' },
          { id: 5, title: "Kışa Hazırlık İndirimleri", date: "1 Kasım 2025", author: "Satış Ekibi", img: "assets/img/blog/blog-5.jpg", text: "EcoTermo akıllı termostat ve radyatör vanalarında kışa özel fiyatlar başladı.", fileType: 'image' },
          { id: 6, title: "%98 Müşteri Memnuniyeti", date: "15 Aralık 2025", author: "Müşteri Hizm.", img: "assets/img/blog/blog-6.jpg", text: "Sektör rekoru kırdık. Güveniniz için sonsuz teşekkürler.", fileType: 'word' }
      ];

      let adminPosts = JSON.parse(localStorage.getItem('shommeAnnouncements')) || [];
      let cleanAdminPosts = adminPosts.filter(post => post.id > 1000); 
      let allPosts = [...defaultAnnouncements, ...cleanAdminPosts];
      allPosts.sort((a, b) => b.id - a.id);

      let html = '';
      allPosts.forEach(post => {
          let imgSource = post.img ? post.img : 'assets/img/blog/blog-1.jpg';
          html += `
          <div class="col-lg-4 col-md-6" data-aos="fade-up">
              <article class="post-box h-100" style="border: 1px solid #eee; border-radius: 10px; overflow: hidden; display: flex; flex-direction: column; box-shadow: 0 5px 15px rgba(0,0,0,0.05); background: #fff;">
                <div class="post-img" style="height: 250px; overflow: hidden;">
                    <img src="${imgSource}" class="img-fluid w-100 h-100" style="object-fit: cover;" onerror="this.src='https://placehold.co/600x400?text=Resim+Yok'">
                </div>
                <div class="p-4 d-flex flex-column flex-grow-1">
                    <div class="meta text-muted small mb-2">
                      <span class="post-date"><i class="bi bi-calendar"></i> ${post.date}</span>
                      <span class="post-author ms-2"><i class="bi bi-person"></i> ${post.author}</span>
                    </div>
                    <h3 class="post-title fw-bold" style="font-size: 1.2rem;">${post.title}</h3>
                    <p class="mb-4 text-muted small">${post.text.substring(0, 100)}...</p>
                    <button class="btn btn-link fw-bold text-primary p-0 mt-auto text-start text-decoration-none" onclick="openAnnouncementModal(${post.id})">
                        Detayları Gör <i class="bi bi-arrow-right"></i>
                    </button>
                </div>
              </article>
          </div>
          `;
      });
      container.innerHTML = html;
    }

    // DUYURU DETAY MODALINI AÇ
    function openAnnouncementModal(id) {
      const defaultAnnouncements = [
          { id: 1, title: "Yaz Kampanyası Başladı!", date: "15 Haziran 2024", author: "Satış Ekibi", img: "assets/img/blog/blog-1.jpg", text: "Yaz geldi, tatil planları yapıldı ama aklınız evinizde kalmasın. Shomme'un akıllı güvenlik paketi sayesinde, dünyanın neresinde olursanız olun evinizi 7/24 canlı izleyebilir ve en ufak bir harekette anında bildirim alabilirsiniz. Akıllı kilitler, kapı sensörleri ve 360 derece dönebilen kameralardan oluşan bu özel setimiz, tatilinizi huzurla geçirmeniz için tasarlandı. Üstelik yaz sezonuna özel %20 indirim fırsatıyla güvenliği ertelemeyin; hemen şimdi güvenlik setlerimizi inceleyin ve huzurlu bir yazın tadını çıkarın.", fileType: 'pdf' },
          { id: 2, title: "Shomme App v2.0 Yayında", date: "10 Nisan 2025", author: "Yazılım Ekibi", img: "assets/img/blog/blog-2.jpg", text: "Kullanıcı geri bildirimlerini dinledik ve mobil uygulamamızı baştan aşağı yeniledik! Yeni Shomme App v2.0, artık çok daha hızlı, modern ve tamamen kişiselleştirilebilir bir arayüz sunuyor. Ana ekrana ekleyebileceğiniz widget’lar sayesinde en çok kullandığınız cihazlara tek tıkla ulaşabilir, gelişmiş senaryo yönetimiyle evinizi tek bir komutla yönetebilirsiniz. Ayrıca beklenen karanlık mod desteği ve gelişmiş sesli asistan entegrasyonu da bu güncelleme ile cebinize geliyor. Deneyimi yaşamak için uygulamayı güncellemeyi unutmayın.", fileType: 'word' },
          { id: 3, title: "Yeni Robot Süpürge Stoklarda!", date: "5 Mayıs 2025", author: "Ürün Yönetimi", img: "assets/img/blog/blog-3.jpg", text: "Ev temizliğinde devrim yaratan yeni CleanBot Pro serisi stoklarımızdaki yerini aldı. Yapay zeka destekli gelişmiş Lidar sensörleri sayesinde evinizin haritasını milimetrik olarak çıkarır, hiçbir engele takılmadan köşe bucak temizlik yapar. Yüksek emiş gücü ve akıllı paspas özelliği ile hem süpürür hem siler, size sadece kahvenizi yudumlamak kalır. Şarjı azaldığında istasyonuna dönüp kendini şarj eden ve temizliğe kaldığı yerden devam eden CleanBot ile tanışmak ve lansmana özel fiyat avantajını kaçırmamak için acele edin.", fileType: 'image' },
          { id: 4, title: "Yılın En İyi Markası Ödülü", date: "20 Ağustos 2025", author: "Yönetim", img: "assets/img/blog/blog-4.jpg", text: "Teknoloji dünyasının en prestijli organizasyonlarından biri olan 'Tech Turkey Awards' kapsamında, 'Yılın En Yenilikçi Akıllı Ev Markası' ödülüne layık görüldük! Bu başarıyı, sadece ürettiğimiz cihazlara değil, müşterilerimize sunduğumuz kesintisiz destek ve güvene borçluyuz. Yerli mühendislik gücümüzle geliştirdiğimiz ekosistemin, global rakipler arasından sıyrılarak zirveye oturması bizim için büyük bir gurur kaynağı. Bizi bu ödüle taşıyan ve ailemizin bir parçası olan tüm kullanıcılarımıza sonsuz teşekkür ederiz.", fileType: 'pdf' },
          { id: 5, title: "Kışa Hazırlık İndirimleri", date: "1 Kasım 2025", author: "Satış Ekibi", img: "assets/img/blog/blog-5.jpg", text: "Kış soğukları kapıya dayanmadan önleminizi alın, hem eviniz sıcak kalsın hem faturalarınız düşsün. EcoTermo akıllı termostat sistemimiz, evinizin ısı yalıtımını ve sizin yaşam rutininizi öğrenerek kombi çalışma saatlerini otomatik optimize eder. Siz evde yokken gereksiz tüketimi keser, eve yaklaştığınızda ise ortamı istediğiniz sıcaklığa getirir. Doğalgaz faturalarında %30'a varan tasarruf sağlayan bu teknolojiye geçmek için şimdi tam zamanı; kışa özel montaj dahil fırsatları kaçırmayın.", fileType: 'image' },
          { id: 6, title: "%98 Müşteri Memnuniyeti", date: "15 Aralık 2025", author: "Müşteri Hizm.", img: "assets/img/blog/blog-6.jpg", text: "Bağımsız bir araştırma kuruluşu tarafından yapılan 'Sektör Güven Endeksi' anketinde, %98 müşteri memnuniyeti oranına ulaşarak kendi rekorumuzu tazeledik. Satış sonrası sunduğumuz 7/24 teknik destek, hızlı servis ağı ve çözüm odaklı müşteri hizmetlerimizle fark yaratmaya devam ediyoruz. Bizim için teknoloji sadece bir araç, asıl amacımız hayatınızı kolaylaştırmak ve güveninizi kazanmak. Her türlü soru ve sorununuzda yanınızda olduğumuzu bilmenizi isteriz; çünkü sizin mutluluğunuz bizim en büyük motivasyonumuz.", fileType: 'word' }
      ];
      let adminPosts = JSON.parse(localStorage.getItem('shommeAnnouncements')) || [];
      let allPosts = [...defaultAnnouncements, ...adminPosts];
      let post = allPosts.find(p => p.id == id);
      if (!post) return;

      document.getElementById('modalAnnTitle').innerText = post.title;
      const imgEl = document.getElementById('modalAnnImg');
      imgEl.src = post.img ? post.img : 'assets/img/blog/blog-1.jpg';
      imgEl.onerror = function() { this.src = 'https://placehold.co/600x400?text=Resim+Yok'; };

      document.getElementById('modalAnnDate').innerText = post.date;
      document.getElementById('modalAnnAuthor').innerText = post.author;
      document.getElementById('modalAnnText').innerText = post.text;

      const fileArea = document.getElementById('modalFileArea');
      let fileBtn = '';
      let type = post.fileType || 'image';

      if (type === 'pdf') fileBtn = `<button class="btn btn-danger"><i class="bi bi-file-pdf"></i> İlgili Belgeyi İndir (PDF)</button>`;
      else if (type === 'word') fileBtn = `<button class="btn btn-primary"><i class="bi bi-file-word"></i> İlgili Belgeyi İndir (Word)</button>`;
      else fileBtn = `<button class="btn btn-secondary" disabled><i class="bi bi-image"></i> Sadece Görsel İçerik</button>`;
      
      fileArea.innerHTML = fileBtn;
      var myModal = new bootstrap.Modal(document.getElementById('dynamicAnnouncementModal'));
      myModal.show();
    }

    // 4. PROFİL İŞLEMLERİ (YENİ)
    function openProfileModal() {
        var currentUser = localStorage.getItem('userName');
        if(!currentUser) return;
        var userProfile = JSON.parse(localStorage.getItem('profile_' + currentUser)) || {};
        
        document.getElementById('profName').value = userProfile.name || "";
        document.getElementById('profSurname').value = userProfile.surname || "";
        document.getElementById('profPhone').value = userProfile.phone || "";
        document.getElementById('profTC').value = userProfile.tc || "";
        document.getElementById('profAddress').value = userProfile.address || "";
        
        document.getElementById('profSuccessMsg').style.display = 'none';
        var myModal = new bootstrap.Modal(document.getElementById('profileModal'));
        myModal.show();
    }

    function saveProfile(event) {
        event.preventDefault();
        var currentUser = localStorage.getItem('userName');
        var profileData = {
            name: document.getElementById('profName').value,
            surname: document.getElementById('profSurname').value,
            phone: document.getElementById('profPhone').value,
            tc: document.getElementById('profTC').value,
            address: document.getElementById('profAddress').value
        };
        localStorage.setItem('profile_' + currentUser, JSON.stringify(profileData));
        var msg = document.getElementById('profSuccessMsg');
        msg.style.display = 'block';
        setTimeout(() => {
            var modalEl = document.getElementById('profileModal');
            var modal = bootstrap.Modal.getInstance(modalEl);
            modal.hide();
        }, 1500);
    }

    // 5. LOGIN & REGISTER
    function updateUIForLoggedInUser(userName) {
        var container = document.getElementById('user-login-li');
        if (container) {
            container.innerHTML = `
        <div class="dropdown">
          <a href="#" class="d-flex align-items-center text-decoration-none dropdown-toggle" id="userDropdown" data-bs-toggle="dropdown" aria-expanded="false">
            <i class="bi bi-person-check-fill" style="font-size: 1.4rem; color: #198754 !important;"></i>
          </a>
          <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="userDropdown" style="position: absolute; z-index: 9999;">
            <li><h6 class="dropdown-header">Hoşgeldin, ${userName}</h6></li>
            <li><a class="dropdown-item" href="#"><i class="bi bi-bag"></i> Siparişlerim</a></li>
            <li><a class="dropdown-item" href="#" onclick="openProfileModal()"><i class="bi bi-person-vcard"></i> Kullanıcı Bilgilerim</a></li>
            <li><hr class="dropdown-divider"></li>
            <li><a class="dropdown-item text-danger" href="#" onclick="logoutUser()"><i class="bi bi-box-arrow-right"></i> Çıkış Yap</a></li>
          </ul>
        </div>
      `;
        }
    }

    function loginSuccess(userName) {
        localStorage.setItem('isLoggedIn', 'true');
        localStorage.setItem('userName', userName);
        document.querySelectorAll('.modal').forEach(modalEl => {
            var modalInstance = bootstrap.Modal.getInstance(modalEl);
            if (modalInstance) modalInstance.hide();
        });
        updateUIForLoggedInUser(userName);
    }

    function logoutUser() {
        localStorage.removeItem('isLoggedIn');
        localStorage.removeItem('userName');
        window.location.reload();
    }

    var registerForm = document.getElementById('registerForm');
    if (registerForm) {
        registerForm.addEventListener('submit', function(e) {
            e.preventDefault();
            var regUser = document.getElementById('regUsername').value.trim();
            var regPass = document.getElementById('regPassword').value.trim();
            var users = JSON.parse(localStorage.getItem('shommeUsers')) || [];
            if (users.some(u => u.username === regUser)) {
                alert("Bu kullanıcı adı zaten alınmış!");
                return;
            }
            users.push({ username: regUser, password: regPass });
            localStorage.setItem('shommeUsers', JSON.stringify(users));
            loginSuccess(regUser);
        });
    }

    var loginForm = document.getElementById('loginForm');
    if (loginForm) {
        loginForm.addEventListener('submit', function(e) {
            e.preventDefault();
            var uName = document.getElementById('username').value.trim();
            var pass = document.getElementById('password').value.trim();
            if (uName === 'admin' && pass === '1234') {
                window.location.href = 'admin/index.html';
                return;
            }
            var users = JSON.parse(localStorage.getItem('shommeUsers')) || [];
            if (users.find(u => u.username === uName && u.password === pass)) {
                loginSuccess(uName);
            } else {
                alert("Hatalı kullanıcı adı veya şifre!");
            }
        });
    }

    // 6. SEPET FONKSİYONLARI
    function addToCart(id, name, price, image) {
      let existingItem = cart.find(item => item.id == id);
      if (existingItem) existingItem.quantity++; else cart.push({ id: id, name: name, price: parseFloat(price), image: image, quantity: 1 });
      saveCart(); updateCartUI();
    }
    function changeQty(id, action) {
      let item = cart.find(item => item.id == id);
      if (!item) return;
      if (action === 'plus') item.quantity++;
      else if (action === 'minus') { item.quantity--; if (item.quantity <= 0) cart = cart.filter(p => p.id != id); }
      saveCart(); updateCartUI();
    }
    function saveCart() { localStorage.setItem('shommeCart', JSON.stringify(cart)); }
    function updateCartUI() {
      const badge = document.getElementById('cart-count');
      const cartList = document.getElementById('cart-list');
      const emptyMsg = document.getElementById('empty-cart-msg');
      const cartContent = document.getElementById('cart-content');
      const cartFooter = document.getElementById('cart-footer');
      const totalEl = document.getElementById('cart-total');
      if (!badge) return;
      let totalCount = cart.reduce((sum, item) => sum + item.quantity, 0);
      badge.innerText = totalCount;
      badge.style.display = totalCount > 0 ? 'block' : 'none';
      if (!cartList || !emptyMsg || !cartContent || !totalEl) return;
      if (cart.length === 0) { emptyMsg.style.display = 'block'; cartContent.style.display = 'none'; if(cartFooter) cartFooter.style.display = 'none'; }
      else { emptyMsg.style.display = 'none'; cartContent.style.display = 'block'; if(cartFooter) cartFooter.style.display = 'flex'; }
      let html = ''; let totalPrice = 0;
      cart.forEach(item => {
        let itemTotal = item.price * item.quantity;
        totalPrice += itemTotal;
        html += `<li class="list-group-item d-flex align-items-center py-3"><img src="${item.image}" class="rounded" style="width: 50px; height: 50px; object-fit: cover; margin-right: 15px;"><div class="flex-grow-1"><h6 class="mb-0 fw-bold" style="font-size: 0.9rem;">${item.name}</h6><small class="text-muted">Birim: ₺${item.price}</small></div><div class="d-flex align-items-center bg-light rounded p-1"><button class="btn btn-sm btn-link text-dark p-0 px-2" onclick="changeQty('${item.id}', 'minus')"><i class="bi bi-dash"></i></button><span class="mx-1 fw-bold small">${item.quantity}</span><button class="btn btn-sm btn-link text-dark p-0 px-2" onclick="changeQty('${item.id}', 'plus')"><i class="bi bi-plus"></i></button></div><div class="ms-3 fw-bold text-primary small">₺${itemTotal.toLocaleString('tr-TR')}</div></li>`;
      });
      cartList.innerHTML = html;
      totalEl.innerText = '₺' + totalPrice.toLocaleString('tr-TR');
    }
  </script>

</body>
</html>